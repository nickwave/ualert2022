var hdf5=(()=>{var e=Object.defineProperty,t=(t,s,i)=>(((t,s,i)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i})(t,"symbol"!=typeof s?s+"":s,i),i),s={};function i(e,t,s=0){var i=new Map;for(let[r,a]of e.entries()){let e=l.unpack_from("<"+a,t,s);s+=l.calcsize(a),1==e.length&&(e=e[0]),i.set(r,e)}return i}function r(e){e||e()}function a(e){var t="<"+Array.from(e.values()).join("");return l.calcsize(t)}function n(e,t=8){return Math.ceil(e/t)*t}((t,s)=>{for(var i in(t=>{e(t,"__esModule",{value:!0})})(t),s)e(t,i,{get:s[i],enumerable:!0})})(s,{Dataset:()=>Hi,File:()=>Fi,Filters:()=>Es,Group:()=>Si});var _={u:"Uint",i:"Int",f:"Float"};function o(e){var t,s,i=l._is_big_endian(e);if(/S/.test(e))t="getString",s=0|((e.match(/S(\d*)/)||[])[1]||1);else{let[i,r,a]=e.match(/[<>=!@]?(i|u|f)(\d*)/);s=parseInt(a||4,10),t="get"+_[r]+(8*s).toFixed()}return[t,i,s]}var l=new class{constructor(){this.big_endian=function(){const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])}(),this.getters={s:"getUint8",b:"getInt8",B:"getUint8",h:"getInt16",H:"getUint16",i:"getInt32",I:"getUint32",l:"getInt32",L:"getUint32",q:"getInt64",Q:"getUint64",f:"getFloat32",d:"getFloat64"},this.byte_lengths={s:1,b:1,B:1,h:2,H:2,i:4,I:4,l:4,L:4,q:8,Q:8,f:4,d:8};let e=Object.keys(this.byte_lengths).join("");this.fmt_size_regex="(\\d*)(["+e+"])"}calcsize(e){for(var t,s=0,i=new RegExp(this.fmt_size_regex,"g");null!==(t=i.exec(e));){let e=parseInt(t[1]||1,10),i=t[2];s+=e*this.byte_lengths[i]}return s}_is_big_endian(e){return!/^</.test(e)&&(!!/^(!|>)/.test(e)||this.big_endian)}unpack_from(e,t,s){s=Number(s||0);for(var i,r=new h(t,0),a=[],n=this._is_big_endian(e),_=new RegExp(this.fmt_size_regex,"g");null!==(i=_.exec(e));){let e=parseInt(i[1]||1,10),_=i[2],l=this.getters[_],h=this.byte_lengths[_];if("s"==_)a.push((new TextDecoder).decode(t.slice(s,s+e))),s+=e;else for(var o=0;o<e;o++)a.push(r[l](s,!n)),s+=h}return a}};var h=class extends DataView{getUint64(e,t){const s=BigInt(this.getUint32(e,t)),i=BigInt(this.getUint32(e+4,t));let r=t?s+(i<<32n):(s<<32n)+i;return Number(r)}getInt64(e,t){var s,i;t?(s=this.getUint32(e,!0),i=this.getInt32(e+4,!0)):(i=this.getInt32(e,!1),s=this.getUint32(e+4,!1));let r=BigInt(s)+(BigInt(i)<<32n);return Number(r)}getString(e,t,s){const i=this.buffer.slice(e,e+s);return(new TextDecoder).decode(i)}getVLENStruct(e,t,s){return[this.getUint32(e,t),this.getUint64(e+4,t),this.getUint32(e+12,t)]}};function d(e){return e.toString(2).length}function f(e,t,s=0,i=!0){let r=new Uint8Array(t.slice(s,s+e));return i||r.reverse(),r.reduce(((e,t,s)=>e+(t<<8*s)),0)}var c=class{constructor(e,t){this.buf=e,this.offset=t,this.dtype=this.determine_dtype()}determine_dtype(){let e=i(u,this.buf,this.offset);this.offset+=g;let t=15&e.get("class_and_version");if(t==p)return this._determine_dtype_fixed_point(e);if(t==m)return this._determine_dtype_floating_point(e);if(t==b)throw"Time datatype class not supported.";if(t==w)return this._determine_dtype_string(e);if(t==k)throw"Bitfield datatype class not supported.";if(t==v)throw"Opaque datatype class not supported.";if(t==y)return this._determine_dtype_compound(e);if(t==z)return["REFERENCE",e.get("size")];if(t==x)return this.determine_dtype();if(t==B)throw"Array datatype class not supported.";if(t==E){let t=this._determine_dtype_vlen(e);if("VLEN_SEQUENCE"==t[0]){t=["VLEN_SEQUENCE",this.determine_dtype()]}return t}throw"Invalid datatype class "+t}_determine_dtype_fixed_point(e){let t=e.get("size");if(![1,2,4,8].includes(t))throw"Unsupported datatype size";var s;var i;return s=(8&e.get("class_bit_field_0"))>0?"i":"u",i=0==(1&e.get("class_bit_field_0"))?"<":">",this.offset+=4,i+s+t.toFixed()}_determine_dtype_floating_point(e){let t=e.get("size");if(![1,2,4,8].includes(t))throw"Unsupported datatype size";var s;return s=0==(1&e.get("class_bit_field_0"))?"<":">",this.offset+=12,s+"f"+t.toFixed()}_determine_dtype_string(e){return"S"+e.get("size").toFixed()}_determine_dtype_vlen(e){return 1!=(1&e.get("class_bit_field_0"))?["VLEN_SEQUENCE",0,0]:["VLEN_STRING",e.get("class_bit_field_0")>>4,1&e.get("class_bit_field_1")]}_determine_dtype_compound(e){throw"Compound type not yet implemented!"}},u=new Map([["class_and_version","B"],["class_bit_field_0","B"],["class_bit_field_1","B"],["class_bit_field_2","B"],["size","I"]]),g=a(u),p=(a(new Map([["offset","I"],["dimensionality","B"],["reserved_0","B"],["reserved_1","B"],["reserved_2","B"],["permutation","I"],["reserved_3","I"],["dim_size_1","I"],["dim_size_2","I"],["dim_size_3","I"],["dim_size_4","I"]])),0),m=1,b=2,w=3,k=4,v=5,y=6,z=7,x=8,E=9,B=10;function A(e){let t=e.length;for(;--t>=0;)e[t]=0}var I=256,U=286,R=30,N=15,j=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),S=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),H=new Array(576);A(H);var M=new Array(60);A(M);var Q=new Array(512);A(Q);var Z=new Array(256);A(Z);var L=new Array(29);A(L);var O,T,C,K=new Array(R);function P(e,t,s,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=s,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function V(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}A(K);var G=e=>e<256?Q[e]:Q[256+(e>>>7)],Y=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},$=(e,t,s)=>{e.bi_valid>16-s?(e.bi_buf|=t<<e.bi_valid&65535,Y(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=s-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=s)},q=(e,t,s)=>{$(e,s[2*t],s[2*t+1])},X=(e,t)=>{let s=0;do{s|=1&e,e>>>=1,s<<=1}while(--t>0);return s>>>1},W=(e,t,s)=>{const i=new Array(16);let r,a,n=0;for(r=1;r<=N;r++)i[r]=n=n+s[r-1]<<1;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=X(i[t]++,t))}},J=e=>{let t;for(t=0;t<U;t++)e.dyn_ltree[2*t]=0;for(t=0;t<R;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},ee=e=>{e.bi_valid>8?Y(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},te=(e,t,s,i)=>{const r=2*t,a=2*s;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[s]},se=(e,t,s)=>{const i=e.heap[s];let r=s<<1;for(;r<=e.heap_len&&(r<e.heap_len&&te(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!te(t,i,e.heap[r],e.depth));)e.heap[s]=e.heap[r],s=r,r<<=1;e.heap[s]=i},ie=(e,t,s)=>{let i,r,a,n,_=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*_]<<8|e.pending_buf[e.d_buf+2*_+1],r=e.pending_buf[e.l_buf+_],_++,0===i?q(e,r,t):(a=Z[r],q(e,a+I+1,t),n=j[a],0!==n&&(r-=L[a],$(e,r,n)),i--,a=G(i),q(e,a,s),n=S[a],0!==n&&(i-=K[a],$(e,i,n)))}while(_<e.last_lit);q(e,256,t)},re=(e,t)=>{const s=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,a=t.stat_desc.elems;let n,_,o,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<a;n++)0!==s[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=l<2?++l:0,s[2*o]=1,e.depth[o]=0,e.opt_len--,r&&(e.static_len-=i[2*o+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)se(e,s,n);o=a;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],se(e,s,1),_=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=_,s[2*o]=s[2*n]+s[2*_],e.depth[o]=(e.depth[n]>=e.depth[_]?e.depth[n]:e.depth[_])+1,s[2*n+1]=s[2*_+1]=o,e.heap[1]=o++,se(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const s=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,n=t.stat_desc.extra_bits,_=t.stat_desc.extra_base,o=t.stat_desc.max_length;let l,h,d,f,c,u,g=0;for(f=0;f<=N;f++)e.bl_count[f]=0;for(s[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)h=e.heap[l],f=s[2*s[2*h+1]+1]+1,f>o&&(f=o,g++),s[2*h+1]=f,h>i||(e.bl_count[f]++,c=0,h>=_&&(c=n[h-_]),u=s[2*h],e.opt_len+=u*(f+c),a&&(e.static_len+=u*(r[2*h+1]+c)));if(0!==g){do{for(f=o-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[o]--,g-=2}while(g>0);for(f=o;0!==f;f--)for(h=e.bl_count[f];0!==h;)d=e.heap[--l],d>i||(s[2*d+1]!==f&&(e.opt_len+=(f-s[2*d+1])*s[2*d],s[2*d+1]=f),h--)}})(e,t),W(s,l,e.bl_count)},ae=(e,t,s)=>{let i,r,a=-1,n=t[1],_=0,o=7,l=4;for(0===n&&(o=138,l=3),t[2*(s+1)+1]=65535,i=0;i<=s;i++)r=n,n=t[2*(i+1)+1],++_<o&&r===n||(_<l?e.bl_tree[2*r]+=_:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[32]++):_<=10?e.bl_tree[34]++:e.bl_tree[36]++,_=0,a=r,0===n?(o=138,l=3):r===n?(o=6,l=3):(o=7,l=4))},ne=(e,t,s)=>{let i,r,a=-1,n=t[1],_=0,o=7,l=4;for(0===n&&(o=138,l=3),i=0;i<=s;i++)if(r=n,n=t[2*(i+1)+1],!(++_<o&&r===n)){if(_<l)do{q(e,r,e.bl_tree)}while(0!=--_);else 0!==r?(r!==a&&(q(e,r,e.bl_tree),_--),q(e,16,e.bl_tree),$(e,_-3,2)):_<=10?(q(e,17,e.bl_tree),$(e,_-3,3)):(q(e,18,e.bl_tree),$(e,_-11,7));_=0,a=r,0===n?(o=138,l=3):r===n?(o=6,l=3):(o=7,l=4)}},_e=!1,oe=(e,t,s,i)=>{$(e,0+(i?1:0),3),((e,t,s,i)=>{ee(e),i&&(Y(e,s),Y(e,~s)),e.pending_buf.set(e.window.subarray(t,t+s),e.pending),e.pending+=s})(e,t,s,!0)},le={_tr_init:e=>{_e||((()=>{let e,t,s,i,r;const a=new Array(16);for(s=0,i=0;i<28;i++)for(L[i]=s,e=0;e<1<<j[i];e++)Z[s++]=i;for(Z[s-1]=i,r=0,i=0;i<16;i++)for(K[i]=r,e=0;e<1<<S[i];e++)Q[r++]=i;for(r>>=7;i<R;i++)for(K[i]=r<<7,e=0;e<1<<S[i]-7;e++)Q[256+r++]=i;for(t=0;t<=N;t++)a[t]=0;for(e=0;e<=143;)H[2*e+1]=8,e++,a[8]++;for(;e<=255;)H[2*e+1]=9,e++,a[9]++;for(;e<=279;)H[2*e+1]=7,e++,a[7]++;for(;e<=287;)H[2*e+1]=8,e++,a[8]++;for(W(H,287,a),e=0;e<R;e++)M[2*e+1]=5,M[2*e]=X(e,5);O=new P(H,j,257,U,N),T=new P(M,S,0,R,N),C=new P(new Array(0),D,0,19,7)})(),_e=!0),e.l_desc=new V(e.dyn_ltree,O),e.d_desc=new V(e.dyn_dtree,T),e.bl_desc=new V(e.bl_tree,C),e.bi_buf=0,e.bi_valid=0,J(e)},_tr_stored_block:oe,_tr_flush_block:(e,t,s,i)=>{let r,a,n=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,s=4093624447;for(t=0;t<=31;t++,s>>>=1)if(1&s&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<I;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),re(e,e.l_desc),re(e,e.d_desc),n=(e=>{let t;for(ae(e,e.dyn_ltree,e.l_desc.max_code),ae(e,e.dyn_dtree,e.d_desc.max_code),re(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*F[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=r&&(r=a)):r=a=s+5,s+4<=r&&-1!==t?oe(e,t,s,i):4===e.strategy||a===r?($(e,2+(i?1:0),3),ie(e,H,M)):($(e,4+(i?1:0),3),((e,t,s,i)=>{let r;for($(e,t-257,5),$(e,s-1,5),$(e,i-4,4),r=0;r<i;r++)$(e,e.bl_tree[2*F[r]+1],3);ne(e,e.dyn_ltree,t-1),ne(e,e.dyn_dtree,s-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,n+1),ie(e,e.dyn_ltree,e.dyn_dtree)),J(e),i&&ee(e)},_tr_tally:(e,t,s)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&s,e.last_lit++,0===t?e.dyn_ltree[2*s]++:(e.matches++,t--,e.dyn_ltree[2*(Z[s]+I+1)]++,e.dyn_dtree[2*G(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{$(e,2,3),q(e,256,H),(e=>{16===e.bi_valid?(Y(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},he=(e,t,s,i)=>{let r=65535&e|0,a=e>>>16&65535|0,n=0;for(;0!==s;){n=s>2e3?2e3:s,s-=n;do{r=r+t[i++]|0,a=a+r|0}while(--n);r%=65521,a%=65521}return r|a<<16|0},de=new Uint32Array((()=>{let e,t=[];for(var s=0;s<256;s++){e=s;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[s]=e}return t})()),fe=(e,t,s,i)=>{const r=de,a=i+s;e^=-1;for(let s=i;s<a;s++)e=e>>>8^r[255&(e^t[s])];return-1^e},ce={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ue={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:ge,_tr_stored_block:pe,_tr_flush_block:me,_tr_tally:be,_tr_align:we}=le,{Z_NO_FLUSH:ke,Z_PARTIAL_FLUSH:ve,Z_FULL_FLUSH:ye,Z_FINISH:ze,Z_BLOCK:xe,Z_OK:Ee,Z_STREAM_END:Be,Z_STREAM_ERROR:Ae,Z_DATA_ERROR:Ie,Z_BUF_ERROR:Ue,Z_DEFAULT_COMPRESSION:Re,Z_FILTERED:Ne,Z_HUFFMAN_ONLY:je,Z_RLE:Se,Z_FIXED:De,Z_DEFAULT_STRATEGY:Fe,Z_UNKNOWN:He,Z_DEFLATED:Me}=ue,Qe=258,Ze=262,Le=103,Oe=113,Te=666,Ce=(e,t)=>(e.msg=ce[t],t),Ke=e=>(e<<1)-(e>4?9:0),Pe=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Ve=(e,t,s)=>(t<<e.hash_shift^s)&e.hash_mask,Ge=e=>{const t=e.state;let s=t.pending;s>e.avail_out&&(s=e.avail_out),0!==s&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+s),e.next_out),e.next_out+=s,t.pending_out+=s,e.total_out+=s,e.avail_out-=s,t.pending-=s,0===t.pending&&(t.pending_out=0))},Ye=(e,t)=>{me(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ge(e.strm)},$e=(e,t)=>{e.pending_buf[e.pending++]=t},qe=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Xe=(e,t,s,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),s),1===e.state.wrap?e.adler=he(e.adler,t,r,s):2===e.state.wrap&&(e.adler=fe(e.adler,t,r,s)),e.next_in+=r,e.total_in+=r,r)},We=(e,t)=>{let s,i,r=e.max_chain_length,a=e.strstart,n=e.prev_length,_=e.nice_match;const o=e.strstart>e.w_size-Ze?e.strstart-(e.w_size-Ze):0,l=e.window,h=e.w_mask,d=e.prev,f=e.strstart+Qe;let c=l[a+n-1],u=l[a+n];e.prev_length>=e.good_match&&(r>>=2),_>e.lookahead&&(_=e.lookahead);do{if(s=t,l[s+n]===u&&l[s+n-1]===c&&l[s]===l[a]&&l[++s]===l[a+1]){a+=2,s++;do{}while(l[++a]===l[++s]&&l[++a]===l[++s]&&l[++a]===l[++s]&&l[++a]===l[++s]&&l[++a]===l[++s]&&l[++a]===l[++s]&&l[++a]===l[++s]&&l[++a]===l[++s]&&a<f);if(i=Qe-(f-a),a=f-Qe,i>n){if(e.match_start=t,n=i,i>=_)break;c=l[a+n-1],u=l[a+n]}}}while((t=d[t&h])>o&&0!=--r);return n<=e.lookahead?n:e.lookahead},Je=e=>{const t=e.w_size;let s,i,r,a,n;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ze)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,s=i;do{r=e.head[--s],e.head[s]=r>=t?r-t:0}while(--i);i=t,s=i;do{r=e.prev[--s],e.prev[s]=r>=t?r-t:0}while(--i);a+=t}if(0===e.strm.avail_in)break;if(i=Xe(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=Ve(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=Ve(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Ze&&0!==e.strm.avail_in)},et=(e,t)=>{let s,i;for(;;){if(e.lookahead<Ze){if(Je(e),e.lookahead<Ze&&t===ke)return 1;if(0===e.lookahead)break}if(s=0,e.lookahead>=3&&(e.ins_h=Ve(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==s&&e.strstart-s<=e.w_size-Ze&&(e.match_length=We(e,s)),e.match_length>=3)if(i=be(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Ve(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ve(e,e.ins_h,e.window[e.strstart+1]);else i=be(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Ye(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ze?(Ye(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ye(e,!1),0===e.strm.avail_out)?1:2},tt=(e,t)=>{let s,i,r;for(;;){if(e.lookahead<Ze){if(Je(e),e.lookahead<Ze&&t===ke)return 1;if(0===e.lookahead)break}if(s=0,e.lookahead>=3&&(e.ins_h=Ve(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==s&&e.prev_length<e.max_lazy_match&&e.strstart-s<=e.w_size-Ze&&(e.match_length=We(e,s),e.match_length<=5&&(e.strategy===Ne||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=be(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Ve(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(Ye(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=be(e,0,e.window[e.strstart-1]),i&&Ye(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=be(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ze?(Ye(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ye(e,!1),0===e.strm.avail_out)?1:2};function st(e,t,s,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=s,this.max_chain=i,this.func=r}var it=[new st(0,0,0,0,((e,t)=>{let s=65535;for(s>e.pending_buf_size-5&&(s=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Je(e),0===e.lookahead&&t===ke)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+s;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,Ye(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-Ze&&(Ye(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ze?(Ye(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(Ye(e,!1),e.strm.avail_out),1)})),new st(4,4,8,4,et),new st(4,5,16,8,et),new st(4,6,32,32,et),new st(4,4,16,16,tt),new st(8,16,32,32,tt),new st(8,16,128,128,tt),new st(8,32,128,256,tt),new st(32,128,258,1024,tt),new st(32,258,258,4096,tt)];function rt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Me,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Pe(this.dyn_ltree),Pe(this.dyn_dtree),Pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var at=e=>{if(!e||!e.state)return Ce(e,Ae);e.total_in=e.total_out=0,e.data_type=He;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:Oe,e.adler=2===t.wrap?0:1,t.last_flush=ke,ge(t),Ee},nt=e=>{const t=at(e);var s;return t===Ee&&((s=e.state).window_size=2*s.w_size,Pe(s.head),s.max_lazy_match=it[s.level].max_lazy,s.good_match=it[s.level].good_length,s.nice_match=it[s.level].nice_length,s.max_chain_length=it[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),t},_t=(e,t,s,i,r,a)=>{if(!e)return Ae;let n=1;if(t===Re&&(t=6),i<0?(n=0,i=-i):i>15&&(n=2,i-=16),r<1||r>9||s!==Me||i<8||i>15||t<0||t>9||a<0||a>De)return Ce(e,Ae);8===i&&(i=9);const _=new rt;return e.state=_,_.strm=e,_.wrap=n,_.gzhead=null,_.w_bits=i,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=t,_.strategy=a,_.method=s,nt(e)},ot={deflateInit:(e,t)=>_t(e,t,Me,15,8,Fe),deflateInit2:_t,deflateReset:nt,deflateResetKeep:at,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?Ae:(e.state.gzhead=t,Ee):Ae,deflate:(e,t)=>{let s,i;if(!e||!e.state||t>xe||t<0)return e?Ce(e,Ae):Ae;const r=e.state;if(!e.output||!e.input&&0!==e.avail_in||r.status===Te&&t!==ze)return Ce(e,0===e.avail_out?Ue:Ae);r.strm=e;const a=r.last_flush;if(r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,$e(r,31),$e(r,139),$e(r,8),r.gzhead?($e(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),$e(r,255&r.gzhead.time),$e(r,r.gzhead.time>>8&255),$e(r,r.gzhead.time>>16&255),$e(r,r.gzhead.time>>24&255),$e(r,9===r.level?2:r.strategy>=je||r.level<2?4:0),$e(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&($e(r,255&r.gzhead.extra.length),$e(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=fe(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):($e(r,0),$e(r,0),$e(r,0),$e(r,0),$e(r,0),$e(r,9===r.level?2:r.strategy>=je||r.level<2?4:0),$e(r,3),r.status=Oe);else{let t=Me+(r.w_bits-8<<4)<<8,s=-1;s=r.strategy>=je||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=s<<6,0!==r.strstart&&(t|=32),t+=31-t%31,r.status=Oe,qe(r,t),0!==r.strstart&&(qe(r,e.adler>>>16),qe(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(e.adler=fe(e.adler,r.pending_buf,r.pending-s,s)),Ge(e),s=r.pending,r.pending!==r.pending_buf_size));)$e(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(e.adler=fe(e.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(e.adler=fe(e.adler,r.pending_buf,r.pending-s,s)),Ge(e),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,$e(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>s&&(e.adler=fe(e.adler,r.pending_buf,r.pending-s,s)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(e.adler=fe(e.adler,r.pending_buf,r.pending-s,s)),Ge(e),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,$e(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>s&&(e.adler=fe(e.adler,r.pending_buf,r.pending-s,s)),0===i&&(r.status=Le)}else r.status=Le;if(r.status===Le&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Ge(e),r.pending+2<=r.pending_buf_size&&($e(r,255&e.adler),$e(r,e.adler>>8&255),e.adler=0,r.status=Oe)):r.status=Oe),0!==r.pending){if(Ge(e),0===e.avail_out)return r.last_flush=-1,Ee}else if(0===e.avail_in&&Ke(t)<=Ke(a)&&t!==ze)return Ce(e,Ue);if(r.status===Te&&0!==e.avail_in)return Ce(e,Ue);if(0!==e.avail_in||0!==r.lookahead||t!==ke&&r.status!==Te){let s=r.strategy===je?((e,t)=>{let s;for(;;){if(0===e.lookahead&&(Je(e),0===e.lookahead)){if(t===ke)return 1;break}if(e.match_length=0,s=be(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,s&&(Ye(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ze?(Ye(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ye(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===Se?((e,t)=>{let s,i,r,a;const n=e.window;for(;;){if(e.lookahead<=Qe){if(Je(e),e.lookahead<=Qe&&t===ke)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=n[r],i===n[++r]&&i===n[++r]&&i===n[++r])){a=e.strstart+Qe;do{}while(i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&r<a);e.match_length=Qe-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(s=be(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(s=be(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),s&&(Ye(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ze?(Ye(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Ye(e,!1),0===e.strm.avail_out)?1:2})(r,t):it[r.level].func(r,t);if(3!==s&&4!==s||(r.status=Te),1===s||3===s)return 0===e.avail_out&&(r.last_flush=-1),Ee;if(2===s&&(t===ve?we(r):t!==xe&&(pe(r,0,0,!1),t===ye&&(Pe(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Ge(e),0===e.avail_out))return r.last_flush=-1,Ee}return t!==ze?Ee:r.wrap<=0?Be:(2===r.wrap?($e(r,255&e.adler),$e(r,e.adler>>8&255),$e(r,e.adler>>16&255),$e(r,e.adler>>24&255),$e(r,255&e.total_in),$e(r,e.total_in>>8&255),$e(r,e.total_in>>16&255),$e(r,e.total_in>>24&255)):(qe(r,e.adler>>>16),qe(r,65535&e.adler)),Ge(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Ee:Be)},deflateEnd:e=>{if(!e||!e.state)return Ae;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==Le&&t!==Oe&&t!==Te?Ce(e,Ae):(e.state=null,t===Oe?Ce(e,Ie):Ee)},deflateSetDictionary:(e,t)=>{let s=t.length;if(!e||!e.state)return Ae;const i=e.state,r=i.wrap;if(2===r||1===r&&42!==i.status||i.lookahead)return Ae;if(1===r&&(e.adler=he(e.adler,t,s,0)),i.wrap=0,s>=i.w_size){0===r&&(Pe(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(s-i.w_size,s),0),t=e,s=i.w_size}const a=e.avail_in,n=e.next_in,_=e.input;for(e.avail_in=s,e.next_in=0,e.input=t,Je(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=Ve(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,Je(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=n,e.input=_,e.avail_in=a,i.wrap=r,Ee},deflateInfo:"pako deflate (from Nodeca project)"},lt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),ht=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const s=t.shift();if(s){if("object"!=typeof s)throw new TypeError(s+"must be non-object");for(const t in s)lt(s,t)&&(e[t]=s[t])}}return e},dt=e=>{let t=0;for(let s=0,i=e.length;s<i;s++)t+=e[s].length;const s=new Uint8Array(t);for(let t=0,i=0,r=e.length;t<r;t++){let r=e[t];s.set(r,i),i+=r.length}return s},ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){ft=!1}var ct=new Uint8Array(256);for(let e=0;e<256;e++)ct[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ct[254]=ct[254]=1;var ut=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,s,i,r,a,n=e.length,_=0;for(r=0;r<n;r++)s=e.charCodeAt(r),55296==(64512&s)&&r+1<n&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(s=65536+(s-55296<<10)+(i-56320),r++)),_+=s<128?1:s<2048?2:s<65536?3:4;for(t=new Uint8Array(_),a=0,r=0;a<_;r++)s=e.charCodeAt(r),55296==(64512&s)&&r+1<n&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(s=65536+(s-55296<<10)+(i-56320),r++)),s<128?t[a++]=s:s<2048?(t[a++]=192|s>>>6,t[a++]=128|63&s):s<65536?(t[a++]=224|s>>>12,t[a++]=128|s>>>6&63,t[a++]=128|63&s):(t[a++]=240|s>>>18,t[a++]=128|s>>>12&63,t[a++]=128|s>>>6&63,t[a++]=128|63&s);return t},gt=(e,t)=>{const s=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const a=new Array(2*s);for(r=0,i=0;i<s;){let t=e[i++];if(t<128){a[r++]=t;continue}let n=ct[t];if(n>4)a[r++]=65533,i+=n-1;else{for(t&=2===n?31:3===n?15:7;n>1&&i<s;)t=t<<6|63&e[i++],n--;n>1?a[r++]=65533:t<65536?a[r++]=t:(t-=65536,a[r++]=55296|t>>10&1023,a[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&ft)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let s="";for(let i=0;i<t;i++)s+=String.fromCharCode(e[i]);return s})(a,r)},pt=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let s=t-1;for(;s>=0&&128==(192&e[s]);)s--;return s<0||0===s?t:s+ct[e[s]]>t?s:t};var mt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},bt=Object.prototype.toString,{Z_NO_FLUSH:wt,Z_SYNC_FLUSH:kt,Z_FULL_FLUSH:vt,Z_FINISH:yt,Z_OK:zt,Z_STREAM_END:xt,Z_DEFAULT_COMPRESSION:Et,Z_DEFAULT_STRATEGY:Bt,Z_DEFLATED:At}=ue;function It(e){this.options=ht({level:Et,method:At,chunkSize:16384,windowBits:15,memLevel:8,strategy:Bt},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new mt,this.strm.avail_out=0;let s=ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(s!==zt)throw new Error(ce[s]);if(t.header&&ot.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?ut(t.dictionary):"[object ArrayBuffer]"===bt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,s=ot.deflateSetDictionary(this.strm,e),s!==zt)throw new Error(ce[s]);this._dict_set=!0}}It.prototype.push=function(e,t){const s=this.strm,i=this.options.chunkSize;let r,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?yt:wt,"string"==typeof e?s.input=ut(e):"[object ArrayBuffer]"===bt.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),(a===kt||a===vt)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if(r=ot.deflate(s,a),r===xt)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),r=ot.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===zt;if(0!==s.avail_out){if(a>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},It.prototype.onData=function(e){this.chunks.push(e)},It.prototype.onEnd=function(e){e===zt&&(this.result=dt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ut=function(e,t){let s,i,r,a,n,_,o,l,h,d,f,c,u,g,p,m,b,w,k,v,y,z,x,E;const B=e.state;s=e.next_in,x=e.input,i=s+(e.avail_in-5),r=e.next_out,E=e.output,a=r-(t-e.avail_out),n=r+(e.avail_out-257),_=B.dmax,o=B.wsize,l=B.whave,h=B.wnext,d=B.window,f=B.hold,c=B.bits,u=B.lencode,g=B.distcode,p=(1<<B.lenbits)-1,m=(1<<B.distbits)-1;e:do{c<15&&(f+=x[s++]<<c,c+=8,f+=x[s++]<<c,c+=8),b=u[f&p];t:for(;;){if(w=b>>>24,f>>>=w,c-=w,w=b>>>16&255,0===w)E[r++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=u[(65535&b)+(f&(1<<w)-1)];continue t}if(32&w){B.mode=12;break e}e.msg="invalid literal/length code",B.mode=30;break e}k=65535&b,w&=15,w&&(c<w&&(f+=x[s++]<<c,c+=8),k+=f&(1<<w)-1,f>>>=w,c-=w),c<15&&(f+=x[s++]<<c,c+=8,f+=x[s++]<<c,c+=8),b=g[f&m];s:for(;;){if(w=b>>>24,f>>>=w,c-=w,w=b>>>16&255,!(16&w)){if(0==(64&w)){b=g[(65535&b)+(f&(1<<w)-1)];continue s}e.msg="invalid distance code",B.mode=30;break e}if(v=65535&b,w&=15,c<w&&(f+=x[s++]<<c,c+=8,c<w&&(f+=x[s++]<<c,c+=8)),v+=f&(1<<w)-1,v>_){e.msg="invalid distance too far back",B.mode=30;break e}if(f>>>=w,c-=w,w=r-a,v>w){if(w=v-w,w>l&&B.sane){e.msg="invalid distance too far back",B.mode=30;break e}if(y=0,z=d,0===h){if(y+=o-w,w<k){k-=w;do{E[r++]=d[y++]}while(--w);y=r-v,z=E}}else if(h<w){if(y+=o+h-w,w-=h,w<k){k-=w;do{E[r++]=d[y++]}while(--w);if(y=0,h<k){w=h,k-=w;do{E[r++]=d[y++]}while(--w);y=r-v,z=E}}}else if(y+=h-w,w<k){k-=w;do{E[r++]=d[y++]}while(--w);y=r-v,z=E}for(;k>2;)E[r++]=z[y++],E[r++]=z[y++],E[r++]=z[y++],k-=3;k&&(E[r++]=z[y++],k>1&&(E[r++]=z[y++]))}else{y=r-v;do{E[r++]=E[y++],E[r++]=E[y++],E[r++]=E[y++],k-=3}while(k>2);k&&(E[r++]=E[y++],k>1&&(E[r++]=E[y++]))}break}}break}}while(s<i&&r<n);k=c>>3,s-=k,c-=k<<3,f&=(1<<c)-1,e.next_in=s,e.next_out=r,e.avail_in=s<i?i-s+5:5-(s-i),e.avail_out=r<n?n-r+257:257-(r-n),B.hold=f,B.bits=c},Rt=15,Nt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),jt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),St=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Dt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ft=(e,t,s,i,r,a,n,_)=>{const o=_.bits;let l,h,d,f,c,u,g=0,p=0,m=0,b=0,w=0,k=0,v=0,y=0,z=0,x=0,E=null,B=0;const A=new Uint16Array(16),I=new Uint16Array(16);let U,R,N,j=null,S=0;for(g=0;g<=Rt;g++)A[g]=0;for(p=0;p<i;p++)A[t[s+p]]++;for(w=o,b=Rt;b>=1&&0===A[b];b--);if(w>b&&(w=b),0===b)return r[a++]=20971520,r[a++]=20971520,_.bits=1,0;for(m=1;m<b&&0===A[m];m++);for(w<m&&(w=m),y=1,g=1;g<=Rt;g++)if(y<<=1,y-=A[g],y<0)return-1;if(y>0&&(0===e||1!==b))return-1;for(I[1]=0,g=1;g<Rt;g++)I[g+1]=I[g]+A[g];for(p=0;p<i;p++)0!==t[s+p]&&(n[I[t[s+p]]++]=p);if(0===e?(E=j=n,u=19):1===e?(E=Nt,B-=257,j=jt,S-=257,u=256):(E=St,j=Dt,u=-1),x=0,p=0,g=m,c=a,k=w,v=0,d=-1,z=1<<w,f=z-1,1===e&&z>852||2===e&&z>592)return 1;for(;;){U=g-v,n[p]<u?(R=0,N=n[p]):n[p]>u?(R=j[S+n[p]],N=E[B+n[p]]):(R=96,N=0),l=1<<g-v,h=1<<k,m=h;do{h-=l,r[c+(x>>v)+h]=U<<24|R<<16|N|0}while(0!==h);for(l=1<<g-1;x&l;)l>>=1;if(0!==l?(x&=l-1,x+=l):x=0,p++,0==--A[g]){if(g===b)break;g=t[s+n[p]]}if(g>w&&(x&f)!==d){for(0===v&&(v=w),c+=m,k=g-v,y=1<<k;k+v<b&&(y-=A[k+v],!(y<=0));)k++,y<<=1;if(z+=1<<k,1===e&&z>852||2===e&&z>592)return 1;d=x&f,r[d]=w<<24|k<<16|c-a|0}}return 0!==x&&(r[c+x]=g-v<<24|64<<16|0),_.bits=w,0},{Z_FINISH:Ht,Z_BLOCK:Mt,Z_TREES:Qt,Z_OK:Zt,Z_STREAM_END:Lt,Z_NEED_DICT:Ot,Z_STREAM_ERROR:Tt,Z_DATA_ERROR:Ct,Z_MEM_ERROR:Kt,Z_BUF_ERROR:Pt,Z_DEFLATED:Vt}=ue,Gt=12,Yt=30,$t=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function qt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Xt,Wt,Jt=e=>{if(!e||!e.state)return Tt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Zt},es=e=>{if(!e||!e.state)return Tt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Jt(e)},ts=(e,t)=>{let s;if(!e||!e.state)return Tt;const i=e.state;return t<0?(s=0,t=-t):(s=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Tt:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=s,i.wbits=t,es(e))},ss=(e,t)=>{if(!e)return Tt;const s=new qt;e.state=s,s.window=null;const i=ts(e,t);return i!==Zt&&(e.state=null),i},is=!0,rs=e=>{if(is){Xt=new Int32Array(512),Wt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ft(1,e.lens,0,288,Xt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ft(2,e.lens,0,32,Wt,0,e.work,{bits:5}),is=!1}e.lencode=Xt,e.lenbits=9,e.distcode=Wt,e.distbits=5},as=(e,t,s,i)=>{let r;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(s-a.wsize,s),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),a.window.set(t.subarray(s-i,s-i+r),a.wnext),(i-=r)?(a.window.set(t.subarray(s-i,s),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0},ns={inflateReset:es,inflateReset2:ts,inflateResetKeep:Jt,inflateInit:e=>ss(e,15),inflateInit2:ss,inflate:(e,t)=>{let s,i,r,a,n,_,o,l,h,d,f,c,u,g,p,m,b,w,k,v,y,z,x=0;const E=new Uint8Array(4);let B,A;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Tt;s=e.state,s.mode===Gt&&(s.mode=13),n=e.next_out,r=e.output,o=e.avail_out,a=e.next_in,i=e.input,_=e.avail_in,l=s.hold,h=s.bits,d=_,f=o,z=Zt;e:for(;;)switch(s.mode){case 1:if(0===s.wrap){s.mode=13;break}for(;h<16;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if(2&s.wrap&&35615===l){s.check=0,E[0]=255&l,E[1]=l>>>8&255,s.check=fe(s.check,E,2,0),l=0,h=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",s.mode=Yt;break}if((15&l)!==Vt){e.msg="unknown compression method",s.mode=Yt;break}if(l>>>=4,h-=4,y=8+(15&l),0===s.wbits)s.wbits=y;else if(y>s.wbits){e.msg="invalid window size",s.mode=Yt;break}s.dmax=1<<s.wbits,e.adler=s.check=1,s.mode=512&l?10:Gt,l=0,h=0;break;case 2:for(;h<16;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if(s.flags=l,(255&s.flags)!==Vt){e.msg="unknown compression method",s.mode=Yt;break}if(57344&s.flags){e.msg="unknown header flags set",s.mode=Yt;break}s.head&&(s.head.text=l>>8&1),512&s.flags&&(E[0]=255&l,E[1]=l>>>8&255,s.check=fe(s.check,E,2,0)),l=0,h=0,s.mode=3;case 3:for(;h<32;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}s.head&&(s.head.time=l),512&s.flags&&(E[0]=255&l,E[1]=l>>>8&255,E[2]=l>>>16&255,E[3]=l>>>24&255,s.check=fe(s.check,E,4,0)),l=0,h=0,s.mode=4;case 4:for(;h<16;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}s.head&&(s.head.xflags=255&l,s.head.os=l>>8),512&s.flags&&(E[0]=255&l,E[1]=l>>>8&255,s.check=fe(s.check,E,2,0)),l=0,h=0,s.mode=5;case 5:if(1024&s.flags){for(;h<16;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}s.length=l,s.head&&(s.head.extra_len=l),512&s.flags&&(E[0]=255&l,E[1]=l>>>8&255,s.check=fe(s.check,E,2,0)),l=0,h=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&(c=s.length,c>_&&(c=_),c&&(s.head&&(y=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(i.subarray(a,a+c),y)),512&s.flags&&(s.check=fe(s.check,i,c,a)),_-=c,a+=c,s.length-=c),s.length))break e;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(0===_)break e;c=0;do{y=i[a+c++],s.head&&y&&s.length<65536&&(s.head.name+=String.fromCharCode(y))}while(y&&c<_);if(512&s.flags&&(s.check=fe(s.check,i,c,a)),_-=c,a+=c,y)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(0===_)break e;c=0;do{y=i[a+c++],s.head&&y&&s.length<65536&&(s.head.comment+=String.fromCharCode(y))}while(y&&c<_);if(512&s.flags&&(s.check=fe(s.check,i,c,a)),_-=c,a+=c,y)break e}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;h<16;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if(l!==(65535&s.check)){e.msg="header crc mismatch",s.mode=Yt;break}l=0,h=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),e.adler=s.check=0,s.mode=Gt;break;case 10:for(;h<32;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}e.adler=s.check=$t(l),l=0,h=0,s.mode=11;case 11:if(0===s.havedict)return e.next_out=n,e.avail_out=o,e.next_in=a,e.avail_in=_,s.hold=l,s.bits=h,Ot;e.adler=s.check=1,s.mode=Gt;case Gt:if(t===Mt||t===Qt)break e;case 13:if(s.last){l>>>=7&h,h-=7&h,s.mode=27;break}for(;h<3;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}switch(s.last=1&l,l>>>=1,h-=1,3&l){case 0:s.mode=14;break;case 1:if(rs(s),s.mode=20,t===Qt){l>>>=2,h-=2;break e}break;case 2:s.mode=17;break;case 3:e.msg="invalid block type",s.mode=Yt}l>>>=2,h-=2;break;case 14:for(l>>>=7&h,h-=7&h;h<32;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",s.mode=Yt;break}if(s.length=65535&l,l=0,h=0,s.mode=15,t===Qt)break e;case 15:s.mode=16;case 16:if(c=s.length,c){if(c>_&&(c=_),c>o&&(c=o),0===c)break e;r.set(i.subarray(a,a+c),n),_-=c,a+=c,o-=c,n+=c,s.length-=c;break}s.mode=Gt;break;case 17:for(;h<14;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if(s.nlen=257+(31&l),l>>>=5,h-=5,s.ndist=1+(31&l),l>>>=5,h-=5,s.ncode=4+(15&l),l>>>=4,h-=4,s.nlen>286||s.ndist>30){e.msg="too many length or distance symbols",s.mode=Yt;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;h<3;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}s.lens[I[s.have++]]=7&l,l>>>=3,h-=3}for(;s.have<19;)s.lens[I[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,B={bits:s.lenbits},z=Ft(0,s.lens,0,19,s.lencode,0,s.work,B),s.lenbits=B.bits,z){e.msg="invalid code lengths set",s.mode=Yt;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;x=s.lencode[l&(1<<s.lenbits)-1],p=x>>>24,m=x>>>16&255,b=65535&x,!(p<=h);){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if(b<16)l>>>=p,h-=p,s.lens[s.have++]=b;else{if(16===b){for(A=p+2;h<A;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if(l>>>=p,h-=p,0===s.have){e.msg="invalid bit length repeat",s.mode=Yt;break}y=s.lens[s.have-1],c=3+(3&l),l>>>=2,h-=2}else if(17===b){for(A=p+3;h<A;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}l>>>=p,h-=p,y=0,c=3+(7&l),l>>>=3,h-=3}else{for(A=p+7;h<A;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}l>>>=p,h-=p,y=0,c=11+(127&l),l>>>=7,h-=7}if(s.have+c>s.nlen+s.ndist){e.msg="invalid bit length repeat",s.mode=Yt;break}for(;c--;)s.lens[s.have++]=y}}if(s.mode===Yt)break;if(0===s.lens[256]){e.msg="invalid code -- missing end-of-block",s.mode=Yt;break}if(s.lenbits=9,B={bits:s.lenbits},z=Ft(1,s.lens,0,s.nlen,s.lencode,0,s.work,B),s.lenbits=B.bits,z){e.msg="invalid literal/lengths set",s.mode=Yt;break}if(s.distbits=6,s.distcode=s.distdyn,B={bits:s.distbits},z=Ft(2,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,B),s.distbits=B.bits,z){e.msg="invalid distances set",s.mode=Yt;break}if(s.mode=20,t===Qt)break e;case 20:s.mode=21;case 21:if(_>=6&&o>=258){e.next_out=n,e.avail_out=o,e.next_in=a,e.avail_in=_,s.hold=l,s.bits=h,Ut(e,f),n=e.next_out,r=e.output,o=e.avail_out,a=e.next_in,i=e.input,_=e.avail_in,l=s.hold,h=s.bits,s.mode===Gt&&(s.back=-1);break}for(s.back=0;x=s.lencode[l&(1<<s.lenbits)-1],p=x>>>24,m=x>>>16&255,b=65535&x,!(p<=h);){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if(m&&0==(240&m)){for(w=p,k=m,v=b;x=s.lencode[v+((l&(1<<w+k)-1)>>w)],p=x>>>24,m=x>>>16&255,b=65535&x,!(w+p<=h);){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}l>>>=w,h-=w,s.back+=w}if(l>>>=p,h-=p,s.back+=p,s.length=b,0===m){s.mode=26;break}if(32&m){s.back=-1,s.mode=Gt;break}if(64&m){e.msg="invalid literal/length code",s.mode=Yt;break}s.extra=15&m,s.mode=22;case 22:if(s.extra){for(A=s.extra;h<A;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}s.length+=l&(1<<s.extra)-1,l>>>=s.extra,h-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;x=s.distcode[l&(1<<s.distbits)-1],p=x>>>24,m=x>>>16&255,b=65535&x,!(p<=h);){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if(0==(240&m)){for(w=p,k=m,v=b;x=s.distcode[v+((l&(1<<w+k)-1)>>w)],p=x>>>24,m=x>>>16&255,b=65535&x,!(w+p<=h);){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}l>>>=w,h-=w,s.back+=w}if(l>>>=p,h-=p,s.back+=p,64&m){e.msg="invalid distance code",s.mode=Yt;break}s.offset=b,s.extra=15&m,s.mode=24;case 24:if(s.extra){for(A=s.extra;h<A;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}s.offset+=l&(1<<s.extra)-1,l>>>=s.extra,h-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){e.msg="invalid distance too far back",s.mode=Yt;break}s.mode=25;case 25:if(0===o)break e;if(c=f-o,s.offset>c){if(c=s.offset-c,c>s.whave&&s.sane){e.msg="invalid distance too far back",s.mode=Yt;break}c>s.wnext?(c-=s.wnext,u=s.wsize-c):u=s.wnext-c,c>s.length&&(c=s.length),g=s.window}else g=r,u=n-s.offset,c=s.length;c>o&&(c=o),o-=c,s.length-=c;do{r[n++]=g[u++]}while(--c);0===s.length&&(s.mode=21);break;case 26:if(0===o)break e;r[n++]=s.length,o--,s.mode=21;break;case 27:if(s.wrap){for(;h<32;){if(0===_)break e;_--,l|=i[a++]<<h,h+=8}if(f-=o,e.total_out+=f,s.total+=f,f&&(e.adler=s.check=s.flags?fe(s.check,r,f,n-f):he(s.check,r,f,n-f)),f=o,(s.flags?l:$t(l))!==s.check){e.msg="incorrect data check",s.mode=Yt;break}l=0,h=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;h<32;){if(0===_)break e;_--,l+=i[a++]<<h,h+=8}if(l!==(4294967295&s.total)){e.msg="incorrect length check",s.mode=Yt;break}l=0,h=0}s.mode=29;case 29:z=Lt;break e;case Yt:z=Ct;break e;case 31:return Kt;default:return Tt}return e.next_out=n,e.avail_out=o,e.next_in=a,e.avail_in=_,s.hold=l,s.bits=h,(s.wsize||f!==e.avail_out&&s.mode<Yt&&(s.mode<27||t!==Ht))&&as(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,s.total+=f,s.wrap&&f&&(e.adler=s.check=s.flags?fe(s.check,r,f,e.next_out-f):he(s.check,r,f,e.next_out-f)),e.data_type=s.bits+(s.last?64:0)+(s.mode===Gt?128:0)+(20===s.mode||15===s.mode?256:0),(0===d&&0===f||t===Ht)&&z===Zt&&(z=Pt),z},inflateEnd:e=>{if(!e||!e.state)return Tt;let t=e.state;return t.window&&(t.window=null),e.state=null,Zt},inflateGetHeader:(e,t)=>{if(!e||!e.state)return Tt;const s=e.state;return 0==(2&s.wrap)?Tt:(s.head=t,t.done=!1,Zt)},inflateSetDictionary:(e,t)=>{const s=t.length;let i,r,a;return e&&e.state?(i=e.state,0!==i.wrap&&11!==i.mode?Tt:11===i.mode&&(r=1,r=he(r,t,s,0),r!==i.check)?Ct:(a=as(e,t,s,s),a?(i.mode=31,Kt):(i.havedict=1,Zt))):Tt},inflateInfo:"pako inflate (from Nodeca project)"};var _s=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},os=Object.prototype.toString,{Z_NO_FLUSH:ls,Z_FINISH:hs,Z_OK:ds,Z_STREAM_END:fs,Z_NEED_DICT:cs,Z_STREAM_ERROR:us,Z_DATA_ERROR:gs,Z_MEM_ERROR:ps}=ue;function ms(e){this.options=ht({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new mt,this.strm.avail_out=0;let s=ns.inflateInit2(this.strm,t.windowBits);if(s!==ds)throw new Error(ce[s]);if(this.header=new _s,ns.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=ut(t.dictionary):"[object ArrayBuffer]"===os.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(s=ns.inflateSetDictionary(this.strm,t.dictionary),s!==ds)))throw new Error(ce[s])}function bs(e,t){const s=new ms(t);if(s.push(e),s.err)throw s.msg||ce[s.err];return s.result}ms.prototype.push=function(e,t){const s=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let a,n,_;if(this.ended)return!1;for(n=t===~~t?t:!0===t?hs:ls,"[object ArrayBuffer]"===os.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){for(0===s.avail_out&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),a=ns.inflate(s,n),a===cs&&r&&(a=ns.inflateSetDictionary(s,r),a===ds?a=ns.inflate(s,n):a===gs&&(a=cs));s.avail_in>0&&a===fs&&s.state.wrap>0&&0!==e[s.next_in];)ns.inflateReset(s),a=ns.inflate(s,n);switch(a){case us:case gs:case cs:case ps:return this.onEnd(a),this.ended=!0,!1}if(_=s.avail_out,s.next_out&&(0===s.avail_out||a===fs))if("string"===this.options.to){let e=pt(s.output,s.next_out),t=s.next_out-e,r=gt(s.output,e);s.next_out=t,s.avail_out=i-t,t&&s.output.set(s.output.subarray(e,e+t),0),this.onData(r)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(a!==ds||0!==_){if(a===fs)return a=ns.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===s.avail_in)break}}return!0},ms.prototype.onData=function(e){this.chunks.push(e)},ms.prototype.onEnd=function(e){e===ds&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=dt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ws={Inflate:ms,inflate:bs,inflateRaw:function(e,t){return(t=t||{}).raw=!0,bs(e,t)},ungzip:bs,constants:ue},{Inflate:ks,inflate:vs,inflateRaw:ys,ungzip:zs}=ws,xs=vs;var Es=new Map([[1,function(e,t){let s=new Uint8Array(e);return xs(s).buffer}],[2,function(e,t){let s=e.byteLength,i=new Uint8Array(s),r=Math.floor(s/t),a=new DataView(e);for(var n=0;n<t;n++)for(var _=0;_<r;_++)i[n+_*t]=a.getUint8(n*r+_);return i.buffer}],[3,function(e,t){return function(e){for(var t=e.byteLength%2!=0,s=e.byteLength-4,i=new DataView(e),r=0,a=0,n=0;n<s-1;n+=2){a=(a+(r=(r+i.getUint16(n,!0))%65535))%65535}if(t){a=(a+(r=(r+i.getUint8(s-1))%65535))%65535}var[_,o]=l.unpack_from(">HH",e,s);if(o%=65535,r!=(_%=65535)||a!=o)throw'ValueError("fletcher32 checksum invalid")'}(e),e.slice(0,-4)}]]),Bs=class{constructor(e,t){this.fh=e,this.offset=t,this.depth=null}init(){this.all_nodes=new Map,this._read_root_node(),this._read_children()}_read_children(){let e=this.depth;for(;e>0;){for(var t of this.all_nodes.get(e))for(var s of t.get("addresses"))this._add_node(this._read_node(s,e-1));e--}}_read_root_node(){let e=this._read_node(this.offset,null);this._add_node(e),this.depth=e.get("node_level")}_add_node(e){let t=e.get("node_level");this.all_nodes.has(t)?this.all_nodes.get(t).push(e):this.all_nodes.set(t,[e])}_read_node(e,t){return node=this._read_node_header(e,t),node.set("keys",[]),node.set("addresses",[]),node}_read_node_header(e){throw"NotImplementedError: must define _read_node_header in implementation class"}},As=class extends Bs{constructor(){super(...arguments),t(this,"B_LINK_NODE",new Map([["signature","4s"],["node_type","B"],["node_level","B"],["entries_used","H"],["left_sibling","Q"],["right_sibling","Q"]]))}_read_node_header(e,t){let s=i(this.B_LINK_NODE,this.fh,e);if(null!=t&&s.get("node_level")!=t)throw"node level does not match";return s}},Is=class extends As{constructor(e,s){super(e,s),t(this,"NODE_TYPE",0),this.init()}_read_node(e,t){let s=this._read_node_header(e,t);e+=a(this.B_LINK_NODE);let i=[],r=[],n=s.get("entries_used");for(var _=0;_<n;_++){let t=l.unpack_from("<Q",this.fh,e)[0];e+=8;let s=l.unpack_from("<Q",this.fh,e)[0];e+=8,i.push(t),r.push(s)}return i.push(l.unpack_from("<Q",this.fh,e)[0]),s.set("keys",i),s.set("addresses",r),s}symbol_table_addresses(){var e=[],t=this.all_nodes.get(0);for(var s of t)e=e.concat(s.get("addresses"));return e}},Us=class extends As{constructor(e,s,i){super(e,s),t(this,"NODE_TYPE",1),this.dims=i,this.init()}_read_node(e,t){let s=this._read_node_header(e,t);e+=a(this.B_LINK_NODE);var i=[],r=[];let n=s.get("entries_used");for(var _=0;_<n;_++){let[t,s]=l.unpack_from("<II",this.fh,e);e+=8;let a="<"+this.dims.toFixed()+"Q",n=l.calcsize(a),_=l.unpack_from(a,this.fh,e);e+=n;let o=l.unpack_from("<Q",this.fh,e)[0];e+=8,i.push(new Map([["chunk_size",t],["filter_mask",s],["chunk_offset",_]])),r.push(o)}return s.set("keys",i),s.set("addresses",r),s}construct_data_from_chunks(e,t,s,i){var r,a,n;if(s instanceof Array){s;let e=s[0];if("REFERENCE"==e){if(8!=s[1])throw"NotImplementedError('Unsupported Reference type')";s="<u8";r="getUint64",a=!1,n=8}else{if("VLEN_STRING"!=e&&"VLEN_SEQUENCE"!=e)throw"NotImplementedError('datatype not implemented')";r="getVLENStruct",a=!1,n=16}}else null,[r,a,n]=o(s);var _=t.reduce((function(e,t){return e*t}),1),l=e.reduce((function(e,t){return e*t}),1);let d=t.length;var f=1,c=(e.slice().map((function(e){let t=f;return f*=e,t})),f=1,t.slice().reverse().map((function(e){let t=f;return f*=e,t})).reverse()),u=new Array(_);let g=l*n;for(var p of this.all_nodes.get(0)){let s=p.get("keys"),_=p.get("addresses"),o=s.length;for(var m=0;m<o;m++){let o=s[m],f=_[m];var b;if(null==i)b=this.fh.slice(f,f+g);else{b=this.fh.slice(f,f+o.get("chunk_size"));let e=o.get("filter_mask");b=this._filter_chunk(b,e,i,n)}for(var w=o.get("chunk_offset").slice(),k=w.slice(),v=k.map((function(){return 0})),y=new h(b),z=0;z<l;z++){for(var x=d-1;x>=0&&v[x]>=e[x];x--)v[x]=0,k[x]=w[x],x>0&&(v[x-1]+=1,k[x-1]+=1);if(k.slice(0,-1).every((function(e,s){return e<t[s]}))){let e=z*n,t=y[r](e,!a,n);u[k.slice(0,-1).reduce((function(e,t,s){return t*c[s]+e}),0)]=t}v[d-1]+=1,k[d-1]+=1}}}return u}_filter_chunk(e,t,s,i){let r=s.length,a=e.slice();for(var n=r-1;n>=0;n--){if(t&1<<n)continue;let e=s[n],r=e.get("filter_id"),_=e.get("client_data");if(!Es.has(r))throw'NotImplementedError("Filter with id:'+r.toFixed()+' not supported")';a=Es.get(r)(a,i,_)}return a}},Rs=class extends Bs{constructor(e,s){super(e,s),t(this,"B_TREE_HEADER",new Map([["signature","4s"],["version","B"],["node_type","B"],["node_size","I"],["record_size","H"],["depth","H"],["split_percent","B"],["merge_percent","B"],["root_address","Q"],["root_nrecords","H"],["total_nrecords","Q"]])),t(this,"B_LINK_NODE",new Map([["signature","4s"],["version","B"],["node_type","B"]])),this.init()}_read_root_node(){let e=this._read_tree_header(this.offset);this.address_formats=this._calculate_address_formats(e),this.header=e,this.depth=e.get("depth");let t=[e.get("root_address"),e.get("root_nrecords"),e.get("total_nrecords")],s=this._read_node(t,this.depth);this._add_node(s)}_read_tree_header(e){return i(this.B_TREE_HEADER,this.fh,this.offset)}_calculate_address_formats(e){let t=e.get("node_size"),s=e.get("record_size"),i=0,r=0,a=new Map,n=e.get("depth");for(var _=0;_<=n;_++){let e,o,l,h="",d="",f="";if(0==_?(e=0,o=0,l=0):1==_?(e=8,h="<Q",o=this._required_bytes(i),d=this._int_format(o),l=0):(e=8,h="<Q",o=this._required_bytes(i),d=this._int_format(o),l=this._required_bytes(r),f=this._int_format(l)),a.set(_,[e,o,l,h,d,f]),_<n){let a=e+o+l;i=this._nrecords_max(t,s,a),r>0?r*=i:r=i}}return a}_nrecords_max(e,t,s){return Math.floor((e-10-s)/(t+s))}_required_bytes(e){return Math.ceil(d(e)/8)}_int_format(e){return["<B","<H","<I","<Q"][e-1]}_read_node(e,t){let[s,i,r]=e,n=this._read_node_header(s,t);s+=a(this.B_LINK_NODE);let _=this.header.get("record_size"),o=[];for(let e=0;e<i;e++){let e=this._parse_record(this.fh,s,_);s+=_,o.push(e)}let h=[],d=this.address_formats.get(t);if(0!=t){let[e,t,r,a,n,_]=d;for(let o=0;o<=i;o++){let i=l.unpack_from(a,this.fh,s)[0];s+=e;let o=l.unpack_from(n,this.fh,s)[0];s+=t;let d=o;r>0&&(d=l.unpack_from(_,this.fh,s)[0]),h.push([i,o,d])}}return n.set("keys",o),n.set("addresses",h),n}_read_node_header(e,t){let s=i(this.B_LINK_NODE,this.fh,e);return s.set("node_level",t),s}*iter_records(){for(let e of this.all_nodes.values())for(let t of e)for(let e of t.get("keys"))yield e}_parse_record(e){throw"NotImplementedError"}},Ns=class extends Rs{constructor(){super(...arguments),t(this,"NODE_TYPE",5)}_parse_record(e,t,s){let i=l.unpack_from("<I",e,t)[0];return t+=4,new Map([["namehash",i],["heapid",e.slice(t,t+7)]])}},js=class extends Rs{constructor(){super(...arguments),t(this,"NODE_TYPE",6)}_parse_record(e,t,s){let i=l.unpack_from("<Q",e,t)[0];return t+=8,new Map([["creationorder",i],["heapid",e.slice(t,t+7)]])}},Ss=class{constructor(e,t,s=!1){var r;if(s)r=new Map([["symbols",1]]);else{if("SNOD"!=(r=i(Cs,e,t)).get("signature"))throw"incorrect node type";t+=Ks}for(var a=[],n=r.get("symbols"),_=0;_<n;_++)a.push(i(Os,e,t)),t+=Ts;s&&(this.group_offset=a[0].get("object_header_address")),this.entries=a,this._contents=r}assign_name(e){this.entries.forEach((function(t){let s=t.get("link_name_offset"),i=e.get_object_name(s);t.set("link_name",i)}))}get_links(e){var t={};return this.entries.forEach((function(s){let i=s.get("cache_type"),r=s.get("link_name");if(0==i||1==i)t[r]=s.get("object_header_address");else if(2==i){let i=s.get("scratch"),n=new ArrayBuffer(4),_=new Uint8Array(n);for(var a=0;a<4;a++)_[a]=i.charCodeAt(a);let o=l.unpack_from("<I",n,0)[0];t[r]=e.get_object_name(o)}})),t}},Ds=class{constructor(e,t){let s=i(Vs,e,t);t+=Gs;let r=s.get("collection_size")-Gs,a=e.slice(t,t+r);this.heap_data=a,this._header=s,this._objects=null}get objects(){if(null==this._objects){this._objects=new Map;for(var e=0;e<=this.heap_data.byteLength-$s;){let t=i(Ys,this.heap_data,e);if(0==t.get("object_index"))break;e+=$s;let s=this.heap_data.slice(e,e+t.get("object_size"));this._objects.set(t.get("object_index"),s),e+=n(t.get("object_size"))}}return this._objects}},Fs=l.unpack_from("8s",new Uint8Array([137,72,68,70,13,10,26,10]).buffer)[0],Hs=l.unpack_from("<Q",new Uint8Array([255,255,255,255,255,255,255,255]).buffer)[0],Ms=new Map([["format_signature","8s"],["superblock_version","B"],["free_storage_version","B"],["root_group_version","B"],["reserved_0","B"],["shared_header_version","B"],["offset_size","B"],["length_size","B"],["reserved_1","B"],["group_leaf_node_k","H"],["group_internal_node_k","H"],["file_consistency_flags","L"],["base_address_lower","Q"],["free_space_address","Q"],["end_of_file_address","Q"],["driver_information_address","Q"]]),Qs=a(Ms),Zs=new Map([["format_signature","8s"],["superblock_version","B"],["offset_size","B"],["length_size","B"],["file_consistency_flags","B"],["base_address","Q"],["superblock_extension_address","Q"],["end_of_file_address","Q"],["root_group_address","Q"],["superblock_checksum","I"]]),Ls=a(Zs),Os=new Map([["link_name_offset","Q"],["object_header_address","Q"],["cache_type","I"],["reserved","I"],["scratch","16s"]]),Ts=a(Os),Cs=new Map([["signature","4s"],["version","B"],["reserved_0","B"],["symbols","H"]]),Ks=a(Cs),Ps=new Map([["signature","4s"],["version","B"],["reserved","3s"],["data_segment_size","Q"],["offset_to_free_list","Q"],["address_of_data_segment","Q"]]),Vs=new Map([["signature","4s"],["version","B"],["reserved","3s"],["collection_size","Q"]]),Gs=a(Vs),Ys=new Map([["object_index","H"],["reference_count","H"],["reserved","I"],["object_size","Q"]]),$s=a(Ys),qs=new Map([["signature","4s"],["version","B"],["object_index_size","H"],["filter_info_size","H"],["flags","B"],["max_managed_object_size","I"],["next_huge_object_index","Q"],["btree_address_huge_objects","Q"],["managed_freespace_size","Q"],["freespace_manager_address","Q"],["managed_space_size","Q"],["managed_alloc_size","Q"],["next_directblock_iterator_address","Q"],["managed_object_count","Q"],["huge_objects_total_size","Q"],["huge_object_count","Q"],["tiny_objects_total_size","Q"],["tiny_object_count","Q"],["table_width","H"],["starting_block_size","Q"],["maximum_direct_block_size","Q"],["log2_maximum_heap_size","H"],["indirect_starting_rows_count","H"],["root_block_address","Q"],["indirect_current_rows_count","H"]]),Xs=class{constructor(e,t){let s=l.unpack_from("<B",e,t)[0];if(1==s)var[i,r,a]=this._parse_v1_objects(e,t);else{if(s!="O".charCodeAt(0))throw"InvalidHDF5File('unknown Data Object Header')";var[i,r,a]=this._parse_v2_objects(e,t)}this.fh=e,this.msgs=i,this.msg_data=r,this.offset=t,this._global_heaps={},this._header=a,this._filter_pipeline=null,this._chunk_params_set=!1,this._chunks=null,this._chunk_dims=null,this._chunk_address=null}get dtype(){let e=this.find_msg_type(Ei)[0].get("offset_to_message");return new c(this.fh,e).dtype}get chunks(){return this._get_chunk_params(),this._chunks}get shape(){let e=this.find_msg_type(zi)[0].get("offset_to_message");return function(e,t){let s=l.unpack_from("<B",e,t)[0];var a;if(1==s)r(1==(a=i(ni,e,t)).get("version")),t+=_i;else{if(2!=s)throw"InvalidHDF5File('unknown dataspace message version')";r(2==(a=i(oi,e,t)).get("version")),t+=li}let n=a.get("dimensionality");return l.unpack_from("<"+(2*n).toFixed()+"I",e,t).filter((function(e,t){return t%2==0}))}(this.fh,e)}get filter_pipeline(){if(null!=this._filter_pipeline)return this._filter_pipeline;let e=this.find_msg_type(Ui);if(!e.length)return this._filter_pipeline=null,this._filter_pipeline;var t=e[0].get("offset_to_message");let[s,r]=l.unpack_from("<BB",this.fh,t);t+=l.calcsize("<BB");var a=[];if(1==s){let[e,s]=l.unpack_from("<HI",this.fh,t);t+=l.calcsize("<HI");for(var _=0;_<r;_++){let e=i(vi,this.fh,t);t+=yi;let s=n(e.get("name_length"),8),r="<"+s.toFixed()+"s",_=l.unpack_from(r,this.fh,t)[0];e.set("filter_name",_),t+=s,r="<"+e.get("client_data_values").toFixed()+"I";let o=l.unpack_from(r,this.fh,t);e.set("client_data",o),t+=4*e.get("client_data_values"),e.get("client_data_values")%2&&(t+=4),a.push(e)}}else{if(2!=s)throw`version ${s} is not supported`;for(let e=0;e<r;e++){let e=new Map,s=this.fh,i=l.unpack_from("<H",s,t)[0];t+=2,e.set("filter_id",i);let r=0;i>255&&(r=l.unpack_from("<H",s,t)[0],t+=2);let n=l.unpack_from("<H",s,t)[0];t+=2;let _=(1&n)>0;e.set("optional",_);let o,h=l.unpack_from("<H",s,t)[0];t+=2,r>0&&(o=l.unpack_from(`${r}s`,s,t)[0],t+=r),e.set("name",o);let d=l.unpack_from(`<${h}i`,s,t);t+=4*h,e.set("client_data_values",d),a.push(e)}}return this._filter_pipeline=a,this._filter_pipeline}find_msg_type(e){return this.msgs.filter((function(t){return t.get("type")==e}))}get_attributes(){let e={},t=this.find_msg_type(Ri);for(let s of t){let t=s.get("offset_to_message"),[i,r]=this.unpack_attribute(t);e[i]=r}return e}get fillvalue(){var e,t=this.find_msg_type(Bi)[0].get("offset_to_message");let s=l.unpack_from("<B",this.fh,t)[0];var r,a,n;if(1==s||2==s)r=i(mi,this.fh,t),t+=bi,e=r.get("fillvalue_defined");else{if(3!=s)throw'InvalidHDF5File("Unknown fillvalue msg version: "'+String(s);r=i(wi,this.fh,t),t+=ki,e=32&r.get("flags")}if(e?(a=l.unpack_from("<I",this.fh,t)[0],t+=4):a=0,a){let[e,s,i]=o(this.dtype);n=new h(this.fh)[e](t,!s,i)}else n=0;return n}unpack_attribute(e){let t=l.unpack_from("<B",this.fh,e)[0];var s,a;if(1==t)r(1==(s=i(ei,this.fh,e)).get("version")),e+=ti,a=8;else{if(3!=t)throw"unsupported attribute message version: "+t;r(3==(s=i(si,this.fh,e)).get("version")),e+=ii,a=1}let _=s.get("name_size"),o=l.unpack_from("<"+_.toFixed()+"s",this.fh,e)[0];var h;o=o.replace(/\x00$/,""),e+=n(_,a);try{h=new c(this.fh,e).dtype}catch(e){return console.log("Attribute "+o+" type not implemented, set to null."),[o,null]}e+=n(s.get("datatype_size"),a);let d=this.determine_data_shape(this.fh,e),f=d.reduce((function(e,t){return e*t}),1);e+=n(s.get("dataspace_size"),a);var u=this._attr_value(h,this.fh,f,e);return 0==d.length&&(u=u[0]),[o,u]}determine_data_shape(e,t){let s=l.unpack_from("<B",e,t)[0];var a;if(1==s)r(1==(a=i(ni,e,t)).get("version")),t+=_i;else{if(2!=s)throw"unknown dataspace message version";r(2==(a=i(oi,e,t)).get("version")),t+=li}let n=a.get("dimensionality");return l.unpack_from("<"+n.toFixed()+"Q",e,t)}_attr_value(e,t,s,i){var r=new Array(s);if(e instanceof Array){let o=e[0];for(var a=0;a<s;a++)if("VLEN_STRING"==o){let s=e[2];var[n,_]=this._vlen_size_and_data(t,i);const o=new TextDecoder(0==s?"ascii":"utf-8");r[a]=o.decode(_),i+=16}else if("REFERENCE"==o){var d=l.unpack_from("<Q",t,i);r[a]=d,i+=8}else{if("VLEN_SEQUENCE"!=o)throw"NotImplementedError";{let s=e[1];var[n,_]=this._vlen_size_and_data(t,i);r[a]=this._attr_value(s,_,n,0),i+=16}}}else{let[n,_,l]=o(e),d=new h(t,0);for(a=0;a<s;a++)r[a]=d[n](i,!_,l),i+=l}return r}_vlen_size_and_data(e,t){let s=l.unpack_from("<I",e,t)[0],a=i(Js,e,t+4),n=a.get("collection_address");var _;return r(a.get("collection_address")<Number.MAX_SAFE_INTEGER),n in this._global_heaps||(_=new Ds(this.fh,n),this._global_heaps[n]=_),[s,(_=this._global_heaps[n]).objects.get(a.get("object_index"))]}_parse_v1_objects(e,t){let s=i(ri,e,t);r(1==s.get("version"));let n=s.get("total_header_messages");for(var _=s.get("object_header_size"),o=t+a(ri),h=e.slice(o,o+_),d=[[o,_]],f=0,c=0,u=new Array(n),g=0;g<n;g++){c>=_&&([o,_]=d[++f],c=0);let t=i(hi,e,o+c),s=o+c+di;if(t.set("offset_to_message",s),t.get("type")==Ni){var[p,m]=l.unpack_from("<QQ",e,s);d.push([p,m])}c+=di+t.get("size"),u[g]=t}return[u,h,s]}_parse_v2_objects(e,t){var[s,r,a]=this._parse_v2_header(e,t);t=a;for(var n=[],_=s.get("size_of_chunk_0"),o=e.slice(t,t+=_),h=[[a,_]],d=0,f=0;;){if(f>=_-ci){let e=h[++d];if(null==e)break;[a,_]=e,f=0}let t=i(fi,e,a+f),s=a+f+ci+r;if(t.set("offset_to_message",s),t.get("type")==Ni){var[c,u]=l.unpack_from("<QQ",e,s);h.push([c+4,u-4])}f+=ci+t.get("size")+r,n.push(t)}return[n,o,s]}_parse_v2_header(e,t){let s=i(ai,e,t);var n;if(t+=a(ai),r(2==s.get("version")),n=4&s.get("flags")?2:0,r(0==(16&s.get("flags"))),32&s.get("flags")){let i=l.unpack_from("<4I",e,t);t+=16,s.set("access_time",i[0]),s.set("modification_time",i[1]),s.set("change_time",i[2]),s.set("birth_time",i[3])}let _=["<B","<H","<I","<Q"][3&s.get("flags")];return s.set("size_of_chunk_0",l.unpack_from(_,e,t)[0]),[s,n,t+=l.calcsize(_)]}get_links(){return Object.fromEntries(this.iter_links())}*iter_links(){for(let e of this.msgs)e.get("type")==ji?yield*this._iter_links_from_symbol_tables(e):e.get("type")==Ai?yield this._get_link_from_link_msg(e):e.get("type")==xi&&(yield*this._iter_link_from_link_info_msg(e))}*_iter_links_from_symbol_tables(e){r(16==e.get("size"));let t=i(ui,this.fh,e.get("offset_to_message"));yield*this._iter_links_btree_v1(t.get("btree_address"),t.get("heap_address"))}*_iter_links_btree_v1(e,t){let s=new Is(this.fh,e),a=new class{constructor(e,t){let s=i(Ps,e,t);r("HEAP"==s.get("signature")),r(0==s.get("version"));let a=s.get("address_of_data_segment"),n=e.slice(a,a+s.get("data_segment_size"));s.set("heap_data",n),this._contents=s,this.data=n}get_object_name(e){let t=new Uint8Array(this.data).indexOf(0,e)-e;return l.unpack_from("<"+t.toFixed()+"s",this.data,e)[0]}}(this.fh,t);for(let e of s.symbol_table_addresses()){let t=new Ss(this.fh,e);t.assign_name(a),yield*Object.entries(t.get_links(a))}}_get_link_from_link_msg(e){let t=e.get("offset_to_message");return this._decode_link_msg(this.fh,t)[1]}_decode_link_msg(e,t){let[s,i]=l.unpack_from("<BB",e,t);t+=2,r(1==s);let a,n,_=2**(3&i),o=(16&i)>0,h=(4&i)>0;(8&i)>0?(a=l.unpack_from("<B",e,t)[0],t+=1):a=0,r([0,1].includes(a)),h&&(n=l.unpack_from("<Q",e,t)[0],t+=8);let d=0;o&&(d=l.unpack_from("<B",e,t)[0],t+=1);let f=0==d?"ascii":"utf-8",c=["<B","<H","<I","<Q"][3&i],u=l.unpack_from(c,e,t)[0];t+=_;let g,p=new TextDecoder(f).decode(e.slice(t,t+u));if(t+=u,0==a)g=l.unpack_from("<Q",e,t)[0];else if(1==a){let s=l.unpack_from("<H",e,t)[0];t+=2,g=new TextDecoder(f).decode(e.slice(t,t+s))}return[n,[p,g]]}*_iter_link_from_link_info_msg(e){let t=e.get("offset_to_message"),s=this._decode_link_info_msg(this.fh,t),i=s.get("heap_address"),r=s.get("name_btree_address"),a=s.get("order_btree_address");null!=r&&(yield*this._iter_links_btree_v2(r,a,i))}*_iter_links_btree_v2(e,t,s){let n,_=new class{constructor(e,t){this.fh=e;let s=i(qs,e,t);if(t+=a(qs),r("FRHP"==s.get("signature")),r(0==s.get("version")),s.get("filter_info_size")>0)throw"Filter info size not supported on FractalHeap";if(s.get("btree_address_huge_objects")!=Hs)throw"Huge objects not implemented in FractalHeap";s.set("btree_address_huge_objects",null),s.get("root_block_address")==Hs&&s.set("root_block_address",null);let n=s.get("log2_maximum_heap_size"),_=this._min_size_nbits(n),o=new Map([["signature","4s"],["version","B"],["heap_header_adddress","Q"],["block_offset",`${_}B`]]);this.indirect_block_header=new Map(o),this.indirect_block_header_size=a(o),2==(2&s.get("flags"))&&o.set("checksum","I"),this.direct_block_header=o,this.direct_block_header_size=a(o);let l=s.get("maximum_direct_block_size");this._managed_object_offset_size=this._min_size_nbits(n);let h=Math.min(l,s.get("max_managed_object_size"));this._managed_object_length_size=this._min_size_integer(h);let d=s.get("starting_block_size"),f=s.get("table_width");if(!(d>0))throw"Starting block size == 0 not implemented";let c=Number(Math.floor(Math.log2(l)));r(1n<<BigInt(c)==l);let u=Number(Math.floor(Math.log2(d)));r(1n<<BigInt(u)==d),this._max_direct_nrows=c-u+2;let g=Math.floor(Math.log2(f));r(1<<g==f),this._indirect_nrows_sub=g+u-1,this.header=s,this.nobjects=s.get("managed_object_count")+s.get("huge_object_count")+s.get("tiny_object_count");let p=[],m=s.get("root_block_address"),b=0;if(null!=m&&(b=s.get("indirect_current_rows_count")),b>0)for(let t of this._iter_indirect_block(e,m,b))p.push(t);else{let t=this._read_direct_block(e,m,d);p.push(t)}let w=p.reduce(((e,t)=>e+t.byteLength),0),k=new Uint8Array(w),v=0;p.forEach((e=>{k.set(new Uint8Array(e),v),v+=e.byteLength})),this.managed=k.buffer}_read_direct_block(e,t,s){let a=e.slice(t,t+s);return r("FHDB"==i(this.direct_block_header,a).get("signature")),a}get_data(e){let t=l.unpack_from("<B",e,0)[0],s=t>>4&3,i=1;if(0==s){r(0==t>>6);let s=this._managed_object_offset_size,a=f(s,e,i);i+=s,s=this._managed_object_length_size;let n=f(s,e,i);return this.managed.slice(a,a+n)}throw 1==s?"tiny objectID not supported in FractalHeap":2==s?"huge objectID not supported in FractalHeap":"unknown objectID type in FractalHeap"}_min_size_integer(e){return this._min_size_nbits(d(e))}_min_size_nbits(e){return Math.ceil(e/8)}*_iter_indirect_block(e,t,s){let a=i(this.indirect_block_header,e,t);t+=this.indirect_block_header_size,r("FHIB"==a.get("signature"));let n=a.get("block_offset").reduce(((e,t,s)=>e+(t<<8*s)),0);a.set("block_offset",n);let[_,o]=this._indirect_info(s),h=[];for(let s=0;s<_;s++){let i=l.unpack_from("<Q",e,t)[0];if(t+=8,i==Hs)break;let r=this._calc_block_size(s);h.push([i,r])}let d=[];for(let s=_;s<_+o;s++){let i=l.unpack_from("<Q",e,t)[0];if(t+=8,i==Hs)break;let r=this._calc_block_size(s),a=this._iblock_nrows_from_block_size(r);d.push([i,a])}for(let[t,s]of h){let i=this._read_direct_block(e,t,s);yield i}for(let[t,s]of d)for(let i of this._iter_indirect_block(e,t,s))yield i}_calc_block_size(e){let t=Math.floor(e/this.header.get("table_width"));return 2**Math.max(t-1,0)*this.header.get("starting_block_size")}_iblock_nrows_from_block_size(e){let t=Math.floor(Math.log2(e));return r(2**t==e),t-this._indirect_nrows_sub}_indirect_info(e){let t,s,i=this.header.get("table_width"),r=e*i,a=this._max_direct_nrows*i;return e<=a?(t=r,s=0):(t=a,s=r-a),[t,s]}_int_format(e){return["B","H","I","Q"][e-1]}}(this.fh,s);n=t!=Ws?new js(this.fh,t):new Ns(this.fh,e);let o=new Map;for(let e of n.iter_records()){let t=_.get_data(e.get("heapid")),[s,i]=this._decode_link_msg(t,0);o.set(s,i)}let h=Array.from(o.keys()).sort();for(let e of h)yield o.get(e)}_decode_link_info_msg(e,t){let[s,a]=l.unpack_from("<BB",e,t);r(0==s),t+=2,(1&a)>0&&(t+=8);let n=i((2&a)>0?pi:gi,e,t),_=new Map;for(let[e,t]of n.entries())_.set(e,t==Ws?null:t);return _}get is_dataset(){return this.find_msg_type(zi).length>0}get_data(){let e=this.find_msg_type(Ii)[0].get("offset_to_message");var[t,s,i,r]=this._get_data_message_properties(e);if(0==i)throw"Compact storage of DataObject not implemented";return 1==i?this._get_contiguous_data(r):2==i?this._get_chunked_data(e):void 0}_get_data_message_properties(e){let t,s,i,[a,n,_]=l.unpack_from("<BBB",this.fh,e);return 1==a||2==a?(t=n,s=_,i=e,i+=l.calcsize("<BBB"),i+=l.calcsize("<BI"),r(1==s||2==s)):3!=a&&4!=a||(s=n,i=e,i+=l.calcsize("<BB")),r(a>=1&&a<=4),[a,t,s,i]}_get_contiguous_data(e){let[t]=l.unpack_from("<Q",this.fh,e);if(t==Ws){let e=this.shape.reduce((function(e,t){return e*t}),1);return new Array(e)}var s=this.shape.reduce((function(e,t){return e*t}),1);if(this.dtype instanceof Array){let e=this.dtype[0];if("REFERENCE"==e){if(8!=this.dtype[1])throw"NotImplementedError('Unsupported Reference type')";return this.fh.slice(t,t+s)}if("VLEN_STRING"==e){let e=this.dtype[2];const a=new TextDecoder(0==e?"ascii":"utf-8");var i=[];for(r=0;r<s;r++){const[e,s]=this._vlen_size_and_data(this.fh,t);i[r]=a.decode(s),t+=16}return i}throw"NotImplementedError('datatype not implemented')"}{let e=this.dtype;if(/[<>=!@\|]?(i|u|f|S)(\d*)/.test(e)){let[i,a,n]=o(e),_=new Array(s),l=new h(this.fh);for(var r=0;r<s;r++)_[r]=l[i](t+r*n,!a,n);return _}throw"not Implemented - no proper dtype defined"}}_get_chunked_data(e){this._get_chunk_params();let t=new Us(this.fh,this._chunk_address,this._chunk_dims).construct_data_from_chunks(this.chunks,this.shape,this.dtype,this.filter_pipeline);if(this.dtype instanceof Array&&/^VLEN/.test(this.dtype[0])){let e=this.dtype[0];for(var s=0;s<t.length;s++){let[r,a,n]=t[s];var i;a in this._global_heaps?i=this._global_heaps[a]:(i=new Ds(this.fh,a),this._global_heaps[a]=i);let _=i.objects.get(n);if("VLEN_STRING"==e){let e=this.dtype[2];const i=new TextDecoder(0==e?"ascii":"utf-8");t[s]=i.decode(_)}}}return t}_get_chunk_params(){if(!this._chunk_params_set){this._chunk_params_set=!0;var e=this.find_msg_type(Ii)[0].get("offset_to_message"),[t,s,i,a]=this._get_data_message_properties(e);if(2==i){var n;if(1==t||2==t){var _=l.unpack_from("<Q",this.fh,a)[0];n=a+l.calcsize("<Q")}else if(3==t){var[s,_]=l.unpack_from("<BQ",this.fh,a);n=a+l.calcsize("<BQ")}r(t>=1&&t<=3);var o="<"+(s-1).toFixed()+"I",h=l.unpack_from(o,this.fh,n);this._chunks=h,this._chunk_dims=s,this._chunk_address=_}}}};var Ws=l.unpack_from("<Q",new Uint8Array([255,255,255,255,255,255,255,255]).buffer),Js=new Map([["collection_address","Q"],["object_index","I"]]),ei=(a(Js),new Map([["version","B"],["reserved","B"],["name_size","H"],["datatype_size","H"],["dataspace_size","H"]])),ti=a(ei),si=new Map([["version","B"],["flags","B"],["name_size","H"],["datatype_size","H"],["dataspace_size","H"],["character_set_encoding","B"]]),ii=a(si),ri=new Map([["version","B"],["reserved","B"],["total_header_messages","H"],["object_reference_count","I"],["object_header_size","I"],["padding","I"]]),ai=new Map([["signature","4s"],["version","B"],["flags","B"]]),ni=new Map([["version","B"],["dimensionality","B"],["flags","B"],["reserved_0","B"],["reserved_1","I"]]),_i=a(ni),oi=new Map([["version","B"],["dimensionality","B"],["flags","B"],["type","B"]]),li=a(oi),hi=new Map([["type","H"],["size","H"],["flags","B"],["reserved","3s"]]),di=a(hi),fi=new Map([["type","B"],["size","H"],["flags","B"]]),ci=a(fi),ui=new Map([["btree_address","Q"],["heap_address","Q"]]),gi=new Map([["heap_address","Q"],["name_btree_address","Q"]]),pi=new Map([["heap_address","Q"],["name_btree_address","Q"],["order_btree_address","Q"]]),mi=new Map([["version","B"],["space_allocation_time","B"],["fillvalue_write_time","B"],["fillvalue_defined","B"]]),bi=a(mi),wi=new Map([["version","B"],["flags","B"]]),ki=a(wi),vi=new Map([["filter_id","H"],["name_length","H"],["flags","H"],["client_data_values","H"]]),yi=a(vi),zi=1,xi=2,Ei=3,Bi=5,Ai=6,Ii=8,Ui=11,Ri=12,Ni=16,ji=17,Si=class{constructor(e,t,s,i=!1){if(null==s?(this.parent=this,this.file=this):(this.parent=s,this.file=s.file),this.name=e,this._links=t.get_links(),this._dataobjects=t,this._attrs=null,this._keys=null,i)return new Proxy(this,Di)}get keys(){return null==this._keys&&(this._keys=Object.keys(this._links)),this._keys.slice()}get values(){return this.keys.map((e=>this.get(e)))}length(){return this.keys.length}_dereference(e){if(!e)throw"cannot deference null reference";let t=this.file._get_object_by_address(e);if(null==t)throw"reference not found in file";return t}get(e){if("number"==typeof e)return this._dereference(e);var t=Mi(e);if("/"==t)return this.file;if("."==t)return this;if(/^\//.test(t))return this.file.get(t.slice(1));if(""!=function(e){let t="/",s=e.lastIndexOf(t)+1,i=e.slice(0,s),r=new RegExp("^"+t+"+$"),a=new RegExp(t+"$");i&&!r.test(i)&&(i=i.replace(a,""));return i}(t))var[s,i]=t.split(/\/(.*)/);else var s=t,i=".";if(!(s in this._links))throw s+" not found in group";var r=Mi(this.name+"/"+s);let a=this._links[s];if("string"==typeof a)try{return this.get(a)}catch(e){return null}var n=new Xs(this.file._fh,a);if(n.is_dataset){if("."!=i)throw r+" is a dataset, not a group";return new Hi(r,n,this)}return new Si(r,n,this).get(i)}visit(e){return this.visititems(((t,s)=>e(t)))}visititems(e){var t=this.name.length;/\/$/.test(this.name)||(t+=1);for(var s=this.values.slice();s;){let i=s.shift();1==s.length&&console.log(i);let r=e(i.name.slice(t),i);if(null!=r)return r;i instanceof Si&&(s=s.concat(i.values))}return null}get attrs(){return null==this._attrs&&(this._attrs=this._dataobjects.get_attributes()),this._attrs}},Di={get:function(e,t,s){return t in e?e[t]:e.get(t)}},Fi=class extends Si{constructor(e,t){var s=new class{constructor(e,t){let s=l.unpack_from("<B",e,t+8);var r;if(0==s)r=i(Ms,e,t),this._end_of_sblock=t+Qs;else{if(2!=s&&3!=s)throw"unsupported superblock version: "+s.toFixed();r=i(Zs,e,t),this._end_of_sblock=t+Ls}if(r.get("format_signature")!=Fs)throw"Incorrect file signature: "+r.get("format_signature");if(8!=r.get("offset_size")||8!=r.get("length_size"))throw"File uses non-64-bit addressing";this.version=r.get("superblock_version"),this._contents=r,this._root_symbol_table=null,this._fh=e}get offset_to_dataobjects(){if(0==this.version){var e=new Ss(this._fh,this._end_of_sblock,!0);return this._root_symbol_table=e,e.group_offset}if(2==this.version||3==this.version)return this._contents.get("root_group_address");throw"Not implemented version = "+this.version.toFixed()}}(e,0),r=s.offset_to_dataobjects;super("/",new Xs(e,r),null),this.parent=this,this._fh=e,this.filename=t||"",this.file=this,this.mode="r",this.userblock_size=0}_get_object_by_address(e){return this._dataobjects.offset==e?this:this.visititems((e=>{e._dataobjects.offset}))}},Hi=class extends Array{constructor(e,t,s){super(),this.parent=s,this.file=s.file,this.name=e,this._dataobjects=t,this._attrs=null,this._astype=null}get value(){var e=this._dataobjects.get_data();return null==this._astype?e:e.astype(this._astype)}get shape(){return this._dataobjects.shape}get attrs(){return this._dataobjects.get_attributes()}get dtype(){return this._dataobjects.dtype}get fillvalue(){return this._dataobjects.fillvalue}};function Mi(e){return e.replace(/\/(\/)+/g,"/")}return s})();
/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */